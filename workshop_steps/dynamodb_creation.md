## DynamoDB Table
To create a DynamoDB Table we need to do three things:
1. Take dependency on [AWS DynamoDB Construct Library](https://awslabs.github.io/aws-cdk/refs/_aws-cdk_aws-dynamodb.html). To do that add `"@aws-cdk/aws-dynamodb": "^0.28.0"` in dependecies of your package.json. Run `npm install` so that dependency is downloaded to your node_modules. *At the time of writing of this workshop I need version 0.28.0 for enabling CORS in API Gateway. More details when we create API Gateway :)*
2. Import dynamodb in your `cdk-workshop-stack.ts` file. Add `import dynamodb = require('@aws-cdk/aws-dynamodb');` among other imports in the file.
3. Create the construct, in constructor add following code:
```typescript
    // The code that defines your stack goes here
    const quotesTable = new dynamodb.Table(this, 'Quotes', {
      tableName: 'Quotes',
      partitionKey: {
        name: 'id',
        type: dynamodb.AttributeType.String
      }
    });
```
Construct `dynamo.Table` receives `this` the stack in this it'll be created.  
`'Quotes'` construct id, this is used by cdk to determine to find construct in the stack. If another construct exists with the same name it'll be updated.  
`{}` props. For every construct there is a Props interface which mentions what is required and optional as properties. For DynamoDB Table it is [TableProps](https://awslabs.github.io/aws-cdk/refs/_aws-cdk_aws-dynamodb.html#@aws-cdk/aws-dynamodb.TableProps)

That's it. We can configure other attributes of the table, but for now we'll use the default values. Run `cdk diff` and validate if you are seeing following output.
```js
Stack CdkWorkshopStack
Resources
[+] AWS::DynamoDB::Table Quotes Quotes4DCFF1CF
```
Run `cdk deploy` to create the table.
```
CdkWorkshopStack: deploying...
CdkWorkshopStack: creating CloudFormation changeset...
 0/3 | 15:50:23 | CREATE_IN_PROGRESS   | AWS::CDK::Metadata   | CDKMetadata
 0/3 | 15:50:23 | CREATE_IN_PROGRESS   | AWS::DynamoDB::Table | Quotes (Quotes4DCFF1CF)
 0/3 | 15:50:24 | CREATE_IN_PROGRESS   | AWS::DynamoDB::Table | Quotes (Quotes4DCFF1CF) Resource creation Initiated
 0/3 | 15:50:25 | CREATE_IN_PROGRESS   | AWS::CDK::Metadata   | CDKMetadata Resource creation Initiated
 1/3 | 15:50:25 | CREATE_COMPLETE      | AWS::CDK::Metadata   | CDKMetadata
 2/3 | 15:50:54 | CREATE_COMPLETE      | AWS::DynamoDB::Table | Quotes (Quotes4DCFF1CF)
 3/3 | 15:50:56 | CREATE_COMPLETE      | AWS::CloudFormation::Stack | CdkWorkshopStack

 âœ…  CdkWorkshopStack

Stack ARN:
arn:aws:cloudformation:us-west-2:222222222222:stack/CdkWorkshopStack/7dad4dd0-62f5-11e9-9318-066b98e74c72
```
![](https://media.giphy.com/media/yoJC2GnSClbPOkV0eA/giphy.gif)

Okay now we expect there to be a `Quotes` table. However, on checking AWS Console > DynamoDB, table name is `CdkWorkshopStack-Quotes4DCFF1CF-1HKBY7Y66RNGJ`. This name is something called LogicalId and is generated by cloudformation if we don't provide a Physical Name. Logical id ensures that:
- It have a human friendly portion (CdkWorkshopStack-`Quotes`4DCFF1CF-1HKBY7Y66RNGJ)
- It is unique within the stack. This is ensured by attaching MD5 hash of the absolute path of the resource. (CdkWorkshopStack-Quotes`4DCFF1CF`-1HKBY7Y66RNGJ)
- It remains unchanged across updates.

When 

For more information about logical id please check [this](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/resources-section-structure.html) and [this](https://docs.aws.amazon.com/CDK/latest/userguide/constructs.html)

Now it is not recommended but if we override resourceName attribute in Props it'll force cdk to use that name. Eg adding `tableName: 'Quotes'` in props will delete this table and create a new table with table name Quotes. 

However, for this workshop we'll use logical id.

## [<<PREVIOUS](../README.md)
## [NEXT>>](lambda_function_creation.md)